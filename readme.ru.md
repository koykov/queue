# Queue

Queue это оболочка над Go каналами, которая имеет свойства:
* балансируемая
* с протечкой
* повторяемая
* планируемая
* с отложенным исполнением
* с механизмом метрик
* с логированием

Очередь была реализована в ответ на необходимость создания множества однотипных очередей, с одинаковыми свойствами.
Из раза в раз создавать одинаковые каналы с разными обработчиками было слишком скучно и в результате появилось это решение.

Queue позволяет абстрагироваться от деталей реализации самой очереди и сосредоточиться только на механизме обработки
элементов очереди. Достаточно написать реализацию обработчика, который реализует интерфейс [Worker](https://github.com/koykov/queue/blob/master/interface.go#L18),
привязать его к [конфигу](https://github.com/koykov/queue/blob/master/config.go#L22) очереди и она сама выполнит всю работу.

Queue не является классической очередью с двумя методами `Enqueue` и `Dequeue`. У этой реализации отсутствует метод
`Dequeue` и вместо него предлагается обработчик `Worker`. Очередь сама выполняет `dequeue` операцию и отправляет полученный
элемент одному из активных воркеров. Таким образом, можно положить элемент в очередь посредством вызова метода [Enqueue](https://github.com/koykov/queue/blob/master/interface.go#L6),
а далее очередь сама проверит есть ли доступный активный воркер, выполнит `dequeue` и отправит полученный элемент воркеру
на обработку.

Очередь настраивается посредством заполнения структуры [Config](https://github.com/koykov/queue/blob/master/config.go#L22).
Двумя обязательными параметрами конфига являются `Size` и `Worker`.

Параметр `Size` задаёт размер очереди в элементах. Создать очередь без лимита по размеру нельзя.

Параметр `Worker` задаёт обработчик элементов очереди. Он должен реализовавыть интерфейс [Worker](https://github.com/koykov/queue/blob/master/interface.go#L18).
Воркер может только обработать элемент очереди и сообщить успешно он обработан или нет.

В результате заполнения этих двух полей мы получим рабочую очередь с фиксированным размером, которая способна обработать
поступающие элементы.

Далее мы рассмотрим как включается и работает каждое из свойств очереди.
